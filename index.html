<html>
  <head>
    <script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-entity id="maze" position="-4 1 -10">
        <a-text
          position="0 -1.8 0"
          id="devicemotionX"
          rotation="-90 0 0"
          value="devicemotion"
          color="black"
        ></a-text>

        <a-text
          position="0 -1.8 0.4"
          id="devicemotionY"
          rotation="-90 0 0"
          value="devicemotion2"
          color="black"
        ></a-text>

        <a-text
          id="devicemotionZ"
          position="0 -1.8 -0.8"
          rotation="-90 0 0"
          value="something"
          color="black"
        ></a-text>

        <a-sky
          src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg"
          rotation="0 0 0"
          opacity="0.5"
        ></a-sky>
        <a-entity
          id="camera"
          camera
          look-controls
          raycaster="objects: .collidable; far: 0.5;"
          collider-check
          rotation="0 0 0"
          position="0 0 0"
        ></a-entity>

        <!-- <a-entity id="camera" position="0 0 0"> <a-camera></a-camera></a-entity> -->
        <!-- <a-entity id="camera" position="0 0 0">
          <a-camera></a-camera>
        </a-entity> -->
      </a-entity>
    </a-scene>
  </body>
  <script>
    const something = document.body.querySelector("#something");
    const devicemotionX = document.body.querySelector("#devicemotionX");
    const devicemotionY = document.body.querySelector("#devicemotionY");
    const devicemotionZ = document.body.querySelector("#devicemotionZ");
    const deviceorientation = document.body.querySelector("#deviceorientation");
    const camera = document.getElementById("camera");

    const speed = 1;
    const handleOrientation = event => {
      console.log("START :", handleOrientation);
      deviceorientation.setAttribute(
        "value",
        `START deviceorientation ${event.alpha} / ${event.beta} / ${event.gamma}`
      );
    };

    const handleMotion = event => {
      console.log("START :", handleMotion);

      something.setAttribute("value", "SET UP! handleMotion");
      devicemotionX.setAttribute("value", "SET UP! handleMotion");

      if (camera) {
        let position = camera.getAttribute("position");
        let rotation = camera.getAttribute("rotation");
        // devicemotion.setAttribute(
        //   "value",
        //   `START position.x ${Math.cos(((rotation.y - 90) * Math.PI) / 180) *
        //     speed} `
        // );
        // devicemotion2.setAttribute(
        //   "value",
        //   `START position.y ${MMath.sin(((rotation.y - 90) * Math.PI) / 180) *
        //     speed} `
        // );
        // position.x += event.acceleration.x;
        // position.z += event.acceleration.y;

        // position.x += -Math.cos(((rotation.y - 90) * Math.PI) / 180) * speed;
        // position.z += Math.sin(((rotation.y - 90) * Math.PI) / 180) * speed;
        const x = Math.floor(event.acceleration.x * 100) / 100;
        const y = Math.floor(event.acceleration.y * 100) / 100;
        const z = Math.floor(event.acceleration.z * 100) / 100;
        devicemotionX.setAttribute("value", `START devicemotion1-X ${x} `);
        devicemotionY.setAttribute("value", `START devicemotion Y ${y} `);
        devicemotionZ.setAttribute("value", `START devicemotion Z ${z}`);
        camera.setAttribute("position", position);
      }
    };

    window.addEventListener("deviceorientation", handleOrientation, true);
    window.addEventListener("devicemotion", handleMotion, true);

    console.log("START2-1 :", something.getAttribute("value"));
    something.setAttribute("value", "SET UP!");
    console.log("START1-1 :", devicemotionX);
    console.log("START1-1 :", devicemotionY);
    console.log("START1-1 :", devicemotionZ);
    console.log("START1-2 :", something.getAttribute("value"));
  </script>
</html>
